<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=C9973DA951AE6202C9B348379A1BE49D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/04f9c26e-88fd-4dfd-b715-9733d17420b6Combined.css,0:HeaderFooterSprite,0:Footer.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=F576C687BC536B84D6E5B3246EE39B49" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>ASP.NET Diagnostic page to dump ASP.NET and Environment configuration</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>ASP.NET Diagnostic page to dump ASP.NET and Environment configuration</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            ASP.NET
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            ASP.NET
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Web, Cloud
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">7/21/2011</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">Apache License, Version 2.0</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/ASPNET-Diagnostic-page-to-9a029c20">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<p><span style="font-family:arial,helvetica,sans-serif; font-size:small">Sometimes you need to quickly see if your ASP.NET site is running on the correct server, from correct code location, using correct .NET runtime, on a correct OS and hardware environment.
 Especially if you are running on a shared hosting and you do not have access to the server configuration, dumping Environment variables gives you valuable information about the server processor and you can find out whether the hosting company is putting you
 on a cheap server. Here&rsquo;s a handy ASPX page that you can just copy on any website and it dumps the Environment settings and common ASP.NET settings to help diagnose various problems.</span></p>
<p><span style="font-family:arial,helvetica,sans-serif; font-size:small"><img src="description/ASP.NET Diagnostic Page.png" alt="" width="499" height="797"></span></p>
<p><span style="font-family:arial,helvetica,sans-serif; font-size:small">&nbsp;</span></p>
<h1><span style="font-family:arial,helvetica,sans-serif; font-size:small; font-weight:normal">It dumps all the Enviornment variables. I have only shown a few on the screenshot. Then it dumps some useful Request properties. Then it has the ASP.NET tracing output
 which gives very useful content.</span></h1>
<p><span style="font-family:arial,helvetica,sans-serif; font-size:small">The code of the page is very simple:</span></p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>HTML</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">html</span>
<pre class="hidden">&lt;%@ Page Language=&quot;C#&quot; AutoEventWireup=&quot;true&quot; Trace=&quot;true&quot; TraceMode=&quot;SortByCategory&quot; %&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;
&lt;head runat=&quot;server&quot;&gt;
    &lt;title&gt;ASP.NET Diagnostic Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form id=&quot;form1&quot; runat=&quot;server&quot;&gt;
    
    &lt;h2&gt;Environment Variables&lt;/h2&gt;
    &lt;pre&gt;
    &lt;table&gt;    
&lt;%
        var variables = Environment.GetEnvironmentVariables();
        foreach (DictionaryEntry entry in variables)
        {
            Response.Write(&quot;&lt;tr&gt;&lt;td&gt;&quot;);
            Response.Write(entry.Key);
            Response.Write(&quot;&lt;/td&gt;&lt;td&gt;&quot;);
            Response.Write(entry.Value);
            Response.Write(&quot;&lt;/td&gt;&lt;/tr&gt;&quot;);
        }
    %&gt;
    &lt;/table&gt;
    &lt;/pre&gt;

    &lt;h2&gt;Misc&lt;/h2&gt;
    &lt;pre&gt;
    Response.Filter = &lt;%= Request.Filter.ToString() %&gt;
    Request.ApplicationPath = &lt;%= Request.ApplicationPath %&gt;
    Request.PhysicalApplicationPath = &lt;%= Request.PhysicalApplicationPath %&gt;
    Request.PhysicalPath = &lt;%= Request.PhysicalPath %&gt;
    Request.UrlReferrer = &lt;%= Request.UrlReferrer %&gt;
    Request.UserLanguages = &lt;%= string.Join(&quot;,&quot;, (Request.UserLanguages ?? new string[0])) %&gt;
    &lt;/pre&gt;
    
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<div class="preview">
<pre class="html"><span class="html__tag_start">&lt;%@&nbsp;Page</span>&nbsp;<span class="html__attr_name">Language</span>=<span class="html__attr_value">&quot;C#&quot;</span>&nbsp;<span class="html__attr_name">AutoEventWireup</span>=<span class="html__attr_value">&quot;true&quot;</span>&nbsp;<span class="html__attr_name">Trace</span>=<span class="html__attr_value">&quot;true&quot;</span>&nbsp;<span class="html__attr_name">TraceMode</span>=<span class="html__attr_value">&quot;SortByCategory&quot;</span>&nbsp;<span class="html__tag_start">%&gt;</span>&nbsp;
<span class="html__tag_start">&lt;html</span>&nbsp;<span class="html__attr_name">xmlns</span>=<span class="html__attr_value">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="html__tag_start">&gt;&nbsp;
</span><span class="html__tag_start">&lt;head</span>&nbsp;<span class="html__attr_name">runat</span>=<span class="html__attr_value">&quot;server&quot;</span><span class="html__tag_start">&gt;&nbsp;
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;title</span><span class="html__tag_start">&gt;</span>ASP.NET&nbsp;Diagnostic&nbsp;Page<span class="html__tag_end">&lt;/title&gt;</span>&nbsp;
<span class="html__tag_end">&lt;/head&gt;</span>&nbsp;
<span class="html__tag_start">&lt;body</span><span class="html__tag_start">&gt;&nbsp;
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;form</span>&nbsp;<span class="html__attr_name">id</span>=<span class="html__attr_value">&quot;form1&quot;</span>&nbsp;<span class="html__attr_name">runat</span>=<span class="html__attr_value">&quot;server&quot;</span><span class="html__tag_start">&gt;&nbsp;
</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;h2</span><span class="html__tag_start">&gt;</span>Environment&nbsp;Variables<span class="html__tag_end">&lt;/h2&gt;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;pre</span><span class="html__tag_start">&gt;&nbsp;
</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;table</span><span class="html__tag_start">&gt;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;
&lt;%&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;variables&nbsp;=&nbsp;Environment.GetEnvironmentVariables();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;(DictionaryEntry&nbsp;entry&nbsp;in&nbsp;variables)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(&quot;<span class="html__tag_start">&lt;tr</span><span class="html__tag_start">&gt;</span><span class="html__tag_start">&lt;td</span><span class="html__tag_start">&gt;</span>&quot;);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(entry.Key);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(&quot;<span class="html__tag_end">&lt;/td&gt;</span><span class="html__tag_start">&lt;td</span><span class="html__tag_start">&gt;</span>&quot;);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(entry.Value);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Response.Write(&quot;<span class="html__tag_end">&lt;/td&gt;</span><span class="html__tag_end">&lt;/tr&gt;</span>&quot;);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_end">&lt;/table&gt;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_end">&lt;/pre&gt;</span>&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;h2</span><span class="html__tag_start">&gt;</span>Misc<span class="html__tag_end">&lt;/h2&gt;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_start">&lt;pre</span><span class="html__tag_start">&gt;&nbsp;
</span>&nbsp;&nbsp;&nbsp;&nbsp;Response.Filter&nbsp;=&nbsp;&lt;%=&nbsp;Request.Filter.ToString()&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Request.ApplicationPath&nbsp;=&nbsp;&lt;%=&nbsp;Request.ApplicationPath&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Request.PhysicalApplicationPath&nbsp;=&nbsp;&lt;%=&nbsp;Request.PhysicalApplicationPath&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Request.PhysicalPath&nbsp;=&nbsp;&lt;%=&nbsp;Request.PhysicalPath&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Request.UrlReferrer&nbsp;=&nbsp;&lt;%=&nbsp;Request.UrlReferrer&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;Request.UserLanguages&nbsp;=&nbsp;&lt;%=&nbsp;string.Join(&quot;,&quot;,&nbsp;(Request.UserLanguages&nbsp;??&nbsp;new&nbsp;string[0]))&nbsp;%&gt;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_end">&lt;/pre&gt;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="html__tag_end">&lt;/form&gt;</span>&nbsp;
<span class="html__tag_end">&lt;/body&gt;</span>&nbsp;
<span class="html__tag_end">&lt;/html&gt;</span>&nbsp;
</pre>
</div>
</div>
</div>
<div class="endscriptcode"><span style="font-family:arial,helvetica,sans-serif; font-size:small">That&rsquo;s all in the Dump.aspx. Just drop this page on a website and you are ready to go.</span></div>
<div class="endscriptcode"></div>
<div class="endscriptcode">
<h1>How to use this page</h1>
<p>You can use this to test many things:</p>
<p>&nbsp;</p>
<ul>
<li>Dump the cookies browser is sending to your website and see if the cookies are correct. Sometimes you get bad cookie injected in browser by some code and it causes your code to fail. Using this page, you can test that.
</li><li>See if server has right .NET framework installed.&nbsp; </li><li>Verify if the site is running from correct webserver by looking at the machine name.
</li><li>Test if load balancer is working. Deploy this page on all your webservers. Then keep refreshing the page. You should see different machine name being dumped on different page loads. &nbsp;&nbsp;
</li><li>Check what is in Session and see if there's something incorrect stored in session that might be causing your application to fail. See if Session being created at all or not.&nbsp;&nbsp;
</li><li>Test if you are getting right Request Headers.&nbsp;&nbsp; </li><li>Set this page as some form's POST page and make a post to this page to see what is getting post.&nbsp;
</li></ul>
These are just some of the ways you can make use of this page to test your webserver, application code, form posts, AJAX calls and so on.&nbsp;</div>
<div class="endscriptcode"><span style="font-family:arial,helvetica,sans-serif; font-size:small"><br>
</span></div>
<div class="endscriptcode"></div>
<div class="endscriptcode"></div>
<div class="endscriptcode"></div>
<div class="endscriptcode"><span style="font-size:medium"><strong><span style="font-family:arial,helvetica,sans-serif">I will keep updating the Dump.aspx with more stuff as I encounter. Keep an eye on it.</span></strong></span></div>

</div>


    </div>
</body>
</html>
