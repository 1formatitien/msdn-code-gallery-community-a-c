<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=6A843E98DB5AEC74CF385ACE5E94CB36" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:FooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=7B1318331AB587926159A23CD37DE62D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Control TextBox con bot&#243;n</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Control TextBox con bot&#243;n</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            Controls, Windows Forms, custom controls, Control, extended controls
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            custom controls, Windows Form Controls
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Desktop
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">es-ES</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">4/4/2015</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MIT</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<div>Un interfaz que nos encontramos con mucha frecuencia es el cuadro de texto con un bot&oacute;n asociado. Se utiliza principalmente en pantallas de b&uacute;squedas, pero tambi&eacute;n nos lo podemos encontrar para cubrir otras necesidades: acceso a interfaces
 de entrada de datos (calendario, calculadora, ...), a informaci&oacute;n de ayuda, etc.</div>
<div>Por desgracia el framework de .NET no incluye un control con esta funcionalidad. Podemos suplir esta carencia cre&aacute;ndonos un control de usuario con un TextBox y un Button, pero vamos a ver c&oacute;mo podemos modificar el TextBox para a&ntilde;adirle
 esta funcionalidad, creando un nuevo control que herede del control TextBox.</div>
<div>&nbsp;</div>
<div>Vamos a crear un nuevo control TextBoxButton que se visualizar&aacute; como un control TextBox normal con un bot&oacute;n situado en la parte derecha del control.</div>
<div>El nuevo control tendr&aacute; todas las propiedades, m&eacute;todos y eventos del control TextBox est&aacute;ndar y adem&aacute;s:</div>
<ul>
<li>Una propiedad ButtonImage que permita indicar la imagen a mostrar en el bot&oacute;n.
</li><li>Un evento ButtonClick que se producir&aacute; cuando se realice click sobre el bot&oacute;n.
</li></ul>
<div>Para crear el control voy a crear un nuevo proyecto TextBoxButtonControl en Visual Studio utilizando la plantilla para bibliotecas de clases.</div>
<div style="">Eliminamos la clase<span class="Apple-converted-space">&nbsp;</span><em>Class1<span class="Apple-converted-space">&nbsp;</span></em>que genera el Visual Studio por defecto y creamos una nueva clase<span class="Apple-converted-space">&nbsp;</span><em>TextBoxButton</em>.</div>
<div style="">&nbsp;</div>
<div style="">Para que nuestro control tenga toda la funcionalidad de un<span class="Apple-converted-space">&nbsp;</span><em>TextBox<span class="Apple-converted-space">&nbsp;</span></em>cl&aacute;sico vamos a hacer que nuestra clase herede de la clase<span class="Apple-converted-space">&nbsp;</span><em>TextBox<span class="Apple-converted-space">&nbsp;</span></em>de<span class="Apple-converted-space">&nbsp;</span><em><a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a></em>.
 Para ello necesitamos agregar la referencia a esta librer&iacute;a. En el men&uacute;<span class="Apple-converted-space">&nbsp;</span><em>Proyecto<span class="Apple-converted-space">&nbsp;</span></em>vamos a la opci&oacute;n<span class="Apple-converted-space">&nbsp;</span><em>Agregar
 referencia</em>, desplegamos<span class="Apple-converted-space">&nbsp;</span><em>Ensamblados<span class="Apple-converted-space">&nbsp;</span></em>y vamos a la opci&oacute;n<span class="Apple-converted-space">&nbsp;</span><em>Framework</em>. En la lista
 de ensamblados seleccionamos<span class="Apple-converted-space">&nbsp;</span><em><a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a></em><span class="Apple-converted-space">&nbsp;</span>y pulsamos<span class="Apple-converted-space">&nbsp;</span><em>Aceptar</em>.</div>
<div style="">&nbsp;</div>
<div style="">Hacemos que nuestra clase TextBoxButton herede de <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.TextBox.aspx"  title="Auto generated link to System.Windows.Forms.TextBox">System.Windows.Forms.TextBox</a>, y con esto ya tendr&iacute;amos la base de nuestro propio control con toda la funcionalidad del TextBox cl&aacute;sico.</div>
<div style="">&nbsp;</div>
<div style="">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">using System;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Text.aspx"  title="Auto generated link to System.Text">System.Text</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Threading.Tasks.aspx"  title="Auto generated link to System.Threading.Tasks">System.Threading.Tasks</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>;

namespace TextBoxButtonControl
{
    public class TextBoxButton: TextBox
    {

    }
}</pre>
<pre class="hidden">Imports <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>

Public Class TextBoxButton
    Inherits TextBox

End Class</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;System;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Text.aspx"  title="Auto generated link to System.Text">System.Text</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Threading.Tasks.aspx"  title="Auto generated link to System.Threading.Tasks">System.Threading.Tasks</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;TextBoxButtonControl&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">class</span>&nbsp;TextBoxButton:&nbsp;TextBox&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">Para poder probar nuestro control vamos a agregar un nuevo proyecto PruebaControl a la soluci&oacute;n utilizando la plantilla Aplicaci&oacute;n de Windows Forms.</div>
</div>
<div>Para poder utilizar el nuevo control desde el proyecto de pruebas tendremos que a&ntilde;adir una referencia al proyecto TextBoxButtonControl. En el men&uacute; Proyecto vamos a la opci&oacute;n Agregar referencia, desplegamos Soluci&oacute;n y vamos a
 la opci&oacute;n Proyectos. Seleccionamos el proyecto TextBoxButtonControl y pulsamos Aceptar.</div>
<div>Si abrimos en modo dise&ntilde;o el formulario Form1 que Visual Studio ha creado autom&aacute;ticamente al crear el proyecto PruebaControl, veremos que en la ventana Cuadro de herramientas aparece nuestro nuevo control TextBoxButton.</div>
<div>&nbsp;</div>
<div>Si no puedes ver el control, compila la Soluci&oacute;n (Men&uacute; Compilar &gt; Compilar Soluci&oacute;n) para que aparezca.</div>
<div>A continuaci&oacute;n arrastramos el control al &aacute;rea de dise&ntilde;o del formulario y veremos que, como esper&aacute;bamos, la apariencia es la misma que la de un control TextBox y, mirando la ventana Propiedades, que ha heredado todas las propiedades
 y eventos de &eacute;ste.</div>
<div>Establecemos el proyecto PruebaControl como proyecto de inicio (Men&uacute; Proyecto &gt;&nbsp; Establecer como proyecto de inicio) y arrancamos la aplicaci&oacute;n para comprobar que el funcionamiento de nuestro TextBoxButton es id&eacute;ntico al de
 cualquier otro TextBox.</div>
<div>Para a&ntilde;adir el bot&oacute;n voy a crear un control Button en el constructor de la clase TextBoxButton y lo a&ntilde;adir&eacute; a la colecci&oacute;n Controls de &eacute;ste.</div>
<div>Tambi&eacute;n voy crear&eacute; un m&eacute;todo PosicionarBoton que se encargar&aacute; de establecer el ancho y alto del bot&oacute;n al valor de la altura del TextBoxButton y de alinearlo a la derecha del TextBox. Llamar&eacute; a este m&eacute;todo
 en la creaci&oacute;n del control y cada vez que se genere el evento Resize indicando que el control ha cambiado de tama&ntilde;o.</div>
<div>Para poder utilizar las clases Size y Point deberemos a&ntilde;adir una referencia al ensamblado <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Drawing.aspx"  title="Auto generated link to System.Drawing">System.Drawing</a> de la misma forma que lo hicimos con System.Windows.Forms.</div>
<div>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">using System;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Drawing.aspx"  title="Auto generated link to System.Drawing">System.Drawing</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Text.aspx"  title="Auto generated link to System.Text">System.Text</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Threading.Tasks.aspx"  title="Auto generated link to System.Threading.Tasks">System.Threading.Tasks</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>;

namespace TextBoxButtonControl
{
    public class TextBoxButton: TextBox
    {

        private readonly Button _button;

        public TextBoxButton()
        {
            _button = new Button {
                Cursor = Cursors.Default,
                TabStop = false
            };
            this.Controls.Add(_button);
            PosicionarBoton();
        }

        protected override void OnResize(EventArgs e)
        {
            base.OnResize(e);
            PosicionarBoton();
        }

        private void PosicionarBoton()
        {
            _button.Size = new Size(this.ClientSize.Height, this.ClientSize.Height);
            _button.Location = new Point(this.ClientSize.Width - _button.Width, 0);
        }

    }
}
</pre>
<pre class="hidden">Imports <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>
Imports <a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Drawing.aspx"  title="Auto generated link to System.Drawing">System.Drawing</a>

Public Class TextBoxButton
    Inherits TextBox

    Private ReadOnly _button As Button

    Public Sub New()
        _button = New Button() With { _
            .Cursor = Cursors.Default, _
            .TabStop = False}
        Me.Controls.Add(_button)
        PosicionarBoton()
    End Sub

    Protected Overrides Sub OnResize(e As EventArgs)
        MyBase.OnResize(e)
        PosicionarBoton()
    End Sub

    Private Sub PosicionarBoton()
        _button.Size = New Size(Me.ClientSize.Height, Me.ClientSize.Height)
        _button.Location = New Point(Me.ClientSize.Width - _button.Width, 0)
    End Sub

End Class
</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;System;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Drawing.aspx"  title="Auto generated link to System.Drawing">System.Drawing</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Text.aspx"  title="Auto generated link to System.Text">System.Text</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Threading.Tasks.aspx"  title="Auto generated link to System.Threading.Tasks">System.Threading.Tasks</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://code.msdn.microsoft.com/Control-TextBox-con-botn-1d33fd2c/https://msdn.microsoft.com/es-ES/library/System.Windows.Forms.aspx"  title="Auto generated link to System.Windows.Forms">System.Windows.Forms</a>;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;TextBoxButtonControl&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span><span class="cs__keyword">class</span>&nbsp;TextBoxButton:&nbsp;TextBox&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span><span class="cs__keyword">readonly</span>&nbsp;Button&nbsp;_button;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;TextBoxButton()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Button&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor&nbsp;=&nbsp;Cursors.Default,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TabStop&nbsp;=&nbsp;<span class="cs__keyword">false</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">this</span>.Controls.Add(_button);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PosicionarBoton();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">protected</span><span class="cs__keyword">override</span><span class="cs__keyword">void</span>&nbsp;OnResize(EventArgs&nbsp;e)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">base</span>.OnResize(e);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PosicionarBoton();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span><span class="cs__keyword">void</span>&nbsp;PosicionarBoton()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.Size&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Size(<span class="cs__keyword">this</span>.ClientSize.Height,&nbsp;<span class="cs__keyword">this</span>.ClientSize.Height);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.Location&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Point(<span class="cs__keyword">this</span>.ClientSize.Width&nbsp;-&nbsp;_button.Width,&nbsp;<span class="cs__number">0</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}&nbsp;
</pre>
</div>
</div>
</div>
</div>
<div>Si compilamos el proyecto y vamos a nuestro formulario de prueba veremos que ya aparece el bot&oacute;n a la derecha de nuestro control. Si modificamos el tama&ntilde;o del control comprobaremos que el bot&oacute;n se redimensiona para ajustarse al tama&ntilde;o
 del contenedor y, si arrancamos el proyecto PruebaControl veremos c&oacute;mo se muestra correctamente en el formulario.</div>
<div>Sin embargo, si introducimos texto en el control, veremos que cuando el texto llega a la altura del bot&oacute;n el texto se sigue escribiendo debajo de &eacute;ste.</div>
<div>Por desgracia el Framework de .NET no nos proporciona herramientas para evitar este problema as&iacute; que tendremos que recurrir a la API de Windows. Para establecer los margenes de un control de edici&oacute;n deberemos enviar el mensaje EM_SETMARGINS.</div>
<div>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">private void PosicionarBoton()
        {
            _button.Size = new Size(this.ClientSize.Height, this.ClientSize.Height);
            _button.Location = new Point(this.ClientSize.Width - _button.Width, 0);
            SendMessage(this.Handle, 0xd3, (IntPtr)2, (IntPtr)(_button.Width &lt;&lt; 16));
        }

        [System.Runtime.InteropServices.DllImport(&quot;user32.dll&quot;)]
        private static extern IntPtr SendMessage(IntPtr hWnd, int msg, IntPtr wp, IntPtr lp);</pre>
<pre class="hidden">    Private Sub PosicionarBoton()
        _button.Size = New Size(Me.ClientSize.Height, Me.ClientSize.Height)
        _button.Location = New Point(Me.ClientSize.Width - _button.Width, 0)
        SendMessage(Me.Handle, &amp;HD3, 2, _button.Width &lt;&lt; 16)
    End Sub

    Private Declare Function SendMessage Lib &quot;user32&quot; Alias &quot;SendMessageA&quot; ( _
                ByVal hWnd As IntPtr, ByVal msg As IntPtr, ByVal wp As IntPtr, _
                ByVal lp As IntPtr) _
            As IntPtr</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">private</span><span class="cs__keyword">void</span>&nbsp;PosicionarBoton()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.Size&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Size(<span class="cs__keyword">this</span>.ClientSize.Height,&nbsp;<span class="cs__keyword">this</span>.ClientSize.Height);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.Location&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Point(<span class="cs__keyword">this</span>.ClientSize.Width&nbsp;-&nbsp;_button.Width,&nbsp;<span class="cs__number">0</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendMessage(<span class="cs__keyword">this</span>.Handle,&nbsp;0xd3,&nbsp;(IntPtr)<span class="cs__number">2</span>,&nbsp;(IntPtr)(_button.Width&nbsp;&lt;&lt;&nbsp;<span class="cs__number">16</span>));&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[System.Runtime.InteropServices.DllImport(<span class="cs__string">&quot;user32.dll&quot;</span>)]&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span><span class="cs__keyword">static</span><span class="cs__keyword">extern</span>&nbsp;IntPtr&nbsp;SendMessage(IntPtr&nbsp;hWnd,&nbsp;<span class="cs__keyword">int</span>&nbsp;msg,&nbsp;IntPtr&nbsp;wp,&nbsp;IntPtr&nbsp;lp);</pre>
</div>
</div>
</div>
<div class="endscriptcode">Si arrancamos de nuevo nuestro formulario de prueba e introducimos texto en el control comprobaremos que el espacio de edici&oacute;n finaliza justo antes de llegar al bot&oacute;n.</div>
</div>
<div>Ya tenemos nuestro control de texto con bot&oacute;n incrustado, pero no tenemos forma de a&ntilde;adirle funcionalidad al bot&oacute;n ya que no podemos controlar cuando es pulsado por el usuario.</div>
<div>Para solucionarlo vamos a propagar el evento Click del bot&oacute;n a trav&eacute;s de un evento ButtonClick en el nuevo control. Para ello creamos el evento ButtonClick y lo configuramos de forma que, cuando se a&ntilde;ada un controlador al evento, se
 lo a&ntilde;adimos al evento Click del bot&oacute;n. Y cuando se elimine un controlador, lo eliminamos igualmente del evento Click del bot&oacute;n.</div>
<div>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">        [Category(&quot;Action&quot;)]
        public event EventHandler ButtonClick
        {
            add {  _button.Click &#43;= value; }
            remove { _button.Click -= value; }
        }</pre>
<pre class="hidden">    &lt;Category(&quot;Action&quot;)&gt; _
    Public Custom Event ButtonClick As EventHandler
        AddHandler(value As EventHandler)
            AddHandler _button.Click, value
        End AddHandler

        RemoveHandler(value As EventHandler)
            RemoveHandler _button.Click, value
        End RemoveHandler

        RaiseEvent(sender As Object, e As EventArgs)
        End RaiseEvent
    End Event</pre>
<div class="preview">
<pre class="csharp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Category(<span class="cs__string">&quot;Action&quot;</span>)]&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">event</span>&nbsp;EventHandler&nbsp;ButtonClick&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add&nbsp;{&nbsp;&nbsp;_button.Click&nbsp;&#43;=&nbsp;<span class="cs__keyword">value</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remove&nbsp;{&nbsp;_button.Click&nbsp;-=&nbsp;<span class="cs__keyword">value</span>;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
</div>
</div>
</div>
<div class="endscriptcode">He a&ntilde;adido un atributo Category al evento para que se muestre en la ventana de Propiedades del Visual Studio junto con el resto de eventos de la categor&iacute;a Acci&oacute;n.</div>
<div class="endscriptcode">&nbsp;</div>
<div class="endscriptcode">Si en el formulario de prueba a&ntilde;adimos un controlador para el evento podremos probar la nueva funcionalidad.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">        private void textBoxButton1_ButtonClick(object sender, EventArgs e)
        {
            MessageBox.Show(&quot;Ha pulsado el bot&oacute;n del control&quot;);
        }</pre>
<pre class="hidden">    Private Sub TextBoxButton1_ButtonClick(sender As Object, e As EventArgs) Handles TextBoxButton1.ButtonClick
        MessageBox.Show(&quot;Ha pulsado el bot&oacute;n del control&quot;)
    End Sub</pre>
<div class="preview">
<pre class="csharp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;textBoxButton1_ButtonClick(<span class="cs__keyword">object</span>&nbsp;sender,&nbsp;EventArgs&nbsp;e)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBox.Show(<span class="cs__string">&quot;Ha&nbsp;pulsado&nbsp;el&nbsp;bot&oacute;n&nbsp;del&nbsp;control&quot;</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
</div>
</div>
</div>
<div class="endscriptcode">
<p>Ya tenemos el control con la funcionalidad deseada. &Uacute;nicamente nos faltar&iacute;a mejorar la presentaci&oacute;n. Para ello a&ntilde;adir&eacute; una propiedad que permita al desarrollador especificar una imagen a mostrar en el bot&oacute;n e incluir&eacute;
 una imagen en el proyecto que se mostrar&aacute; por defecto en caso de que el desarrollador no indique ninguna.</p>
<p>Primero voy a a&ntilde;adir la imagen que mostrar&eacute; por defecto en el proyecto. Para ello abrimos las propiedades del proyecto (Men&uacute; Proyecto &gt; Propiedades de TextBoxButtonControl...) y seleccionamos la opci&oacute;n Recursos. Si nos aparece
 un mensaje indicando que no existe ning&uacute;n archivo de recursos para el proyecto, hacemos click en el enlace para generar uno. Seleccionamos Im&aacute;genes como tipo de recurso y Agregar archivo existente... en Agregar recurso.</p>
</div>
<span style="background-color:#ffffcc"><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1">La imagen&nbsp;ha sido creada originalmente
 por<span class="Apple-converted-space">&nbsp;</span></span><a title="Google" href="http://www.google.com/" style="">Google</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1"><span class="Apple-converted-space">&nbsp;</span>y
 descargada de<span class="Apple-converted-space">&nbsp;</span></span><a title="Flaticon" href="http://www.flaticon.com/" style="">www.flaticon.com</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1">.
 La imagen se encuentra bajo licencia<span class="Apple-converted-space">&nbsp;</span></span><a title="Creative Commons BY 3.0" href="http://creativecommons.org/licenses/by/3.0/" style="">CC BY 3.0</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1">.</span>&nbsp;</span></div>
<div class="endscriptcode"></div>
<div class="endscriptcode">Una vez a&ntilde;adida la imagen establecemos el nombre del recurso como &quot;ellipsis&quot;.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode">A continuaci&oacute;n voy a modificar la inicializaci&oacute;n del bot&oacute;n para establecer la imagen por defecto.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">            _button = new Button
            {
                Cursor = Cursors.Default,
                TabStop = false,
                BackgroundImage = Properties.Resources.ellipsis,
                BackgroundImageLayout = ImageLayout.Zoom
            };</pre>
<pre class="hidden">        _button = New Button() With { _
            .Cursor = Cursors.Default, _
            .TabStop = False, _
            .BackgroundImage = My.Resources.ellipsis, _
            .BackgroundImageLayout = ImageLayout.Zoom}</pre>
<div class="preview">
<pre class="csharp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Button&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cursor&nbsp;=&nbsp;Cursors.Default,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TabStop&nbsp;=&nbsp;<span class="cs__keyword">false</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BackgroundImage&nbsp;=&nbsp;Properties.Resources.ellipsis,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BackgroundImageLayout&nbsp;=&nbsp;ImageLayout.Zoom&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;Si arrancamos la aplicaci&oacute;n podremos ver el efecto del cambio.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode">Ya s&oacute;lo falta darle al desarrollador la posibilidad de cambiar la imagen del bot&oacute;n. As&iacute; que voy a a&ntilde;adir al control una propiedad ButtonImage.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode">
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Editar script</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">        private Image _buttonImage;

        [Category(&quot;Appearance&quot;), Description(&quot;Imagen del bot&oacute;n&quot;)]
        public Image ButtonImage
        {
            get
            {
                return _buttonImage;
            }
            set
            {
                _buttonImage = value;
                if (_buttonImage == null)
                    _button.BackgroundImage = Properties.Resources.ellipsis;
                else
                    _button.BackgroundImage = _buttonImage;
            }
        }</pre>
<pre class="hidden">    Private _buttonImage As Image

    &lt;Category(&quot;Appearance&quot;), Description(&quot;Imagen del bot&oacute;n&quot;)&gt; _
    Public Property ButtonImage() As Image
        Get
            Return _buttonImage
        End Get
        Set(ByVal value As Image)
            _buttonImage = value
            If _buttonImage Is Nothing Then
                _button.BackgroundImage = My.Resources.ellipsis
            Else
                _button.BackgroundImage = _buttonImage
            End If
        End Set
    End Property</pre>
<div class="preview">
<pre class="csharp">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">private</span>&nbsp;Image&nbsp;_buttonImage;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[Category(<span class="cs__string">&quot;Appearance&quot;</span>),&nbsp;Description(<span class="cs__string">&quot;Imagen&nbsp;del&nbsp;bot&oacute;n&quot;</span>)]&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;Image&nbsp;ButtonImage&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;_buttonImage;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">set</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_buttonImage&nbsp;=&nbsp;<span class="cs__keyword">value</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(_buttonImage&nbsp;==&nbsp;<span class="cs__keyword">null</span>)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.BackgroundImage&nbsp;=&nbsp;Properties.Resources.ellipsis;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">else</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_button.BackgroundImage&nbsp;=&nbsp;_buttonImage;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</pre>
</div>
</div>
</div>
<div class="endscriptcode">He creado una variable privada _buttonImage para almacenar la imagen elegida por el desarrollador. Si el desarrollador no establece ninguna imagen se utiliza la imagen por defecto.
<p>Si compilo y vuelvo al formulario de prueba podemos ver la nueva propiedad del control.</p>
</div>
</div>
</div>
<div class="endscriptcode">Para probar la nueva propiedad voy a asignarle a la propiedad ButtonImage una imagen con una lupa.</div>
<div class="endscriptcode"></div>
<div class="endscriptcode"><span style="background-color:#ffffcc"><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1">Imagen creada
 por&nbsp;</span><a title="SimpleIcon" href="http://www.simpleicon.com/" style="">SimpleIcon</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1"><span class="Apple-converted-space">&nbsp;</span>y
 descargada de&nbsp;</span><a title="Flaticon" href="http://www.flaticon.com/" style="">www.flaticon.com</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1"><span class="Apple-converted-space">&nbsp;</span>bajo
 licencia&nbsp;</span><a title="Creative Commons BY 3.0" href="http://creativecommons.org/licenses/by/3.0/" style="">CC BY 3.0</a><span style="color:#000000; text-transform:none; text-indent:0px; letter-spacing:normal; word-spacing:0px; float:none; display:inline!important; white-space:normal; widows:1">.</span></span></div>
</div>
<p><br>
Al arrancar la aplicaci&oacute;n podemos ver el efecto del cambio.</p>
<p>&nbsp;</p>
<p><img id="135819" src="description/PruebaBotonLupa.png" alt="" width="300" height="299"></p>

</div>


    </div>
</body>
</html>
