<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://uhf.microsoft.com/mscc/statics/mscc-0.4.0.min.css" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps;/Areas/Centers/Themes/StandardDevCenter/Content:0&amp;amp;v=D38668CD56D319C6F24AE7918C71933D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:NewFooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=C4DD9F8E9A683F15DCD8C4BE9F889AA2" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>AWS SDK  S3 Storage using C#</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>AWS SDK  S3 Storage using C#</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            C#, autofac, Dependency Injection, ASP.NET MVC 5, Visual Studio 2017, AWS SDK, AWS S3, AWS S3 Bucket, AWS S3 Object
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            AWS S3 Storage, AWS Security, AWS S3 Bucket Creation using AWS SDk, AWS S3 Object Creation using AWS SDK, AWS S3 Bucket URL Creation using AWS SDk, AWS S3 Download URL Creation using AWS SDK
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Web, Cloud
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">4/2/2018</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MIT</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<p><em>I created this sample to access AWS S3 storage using AWS SDK and C#. This sample shows how you can create</em></p>
<p><em>Bucket and upload objects into buckets. I used ASP.net MVC 5 to perform all CRUD operations.&nbsp;</em></p>
<p><em>This sample also uses dependency injection using Autofac and used it inside controllers to inject.</em></p>
<h1><span>Building the Sample</span></h1>
<p><em>AWS SDK for .net</em></p>
<p><em>Autofac</em></p>
<p><em>Visual Studio 2015</em></p>
<p><em>.net framework 4.6</em></p>
<p><span style="font-size:20px; font-weight:bold">Description</span></p>
<p>This is first time i learned AWS. As per as my understanding , AWS SDK for .net is very easy to use API and Amazon provides rich documentation.&nbsp;</p>
<p>AWS S3 is is robust and fast storage system mostlly used for CDN and static website hosting. AWS S3 is budget friendly and secure .</p>
<p>In this sample , i showed how we can create Bucket and upload file inside it. I tried to make it simple as possible.</p>
<p>I hope it will be very helpful for developers for all level.</p>
<p><strong style="color:#ff0000">Visit and login&nbsp; <a href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://www.console.aws.amazon.com/">
https://www.console.aws.amazon.com</a></strong></p>
<p>&nbsp;<img id="197459" src="description/aws-step 1.png" alt=""></p>
<p><strong><span style="color:#ff0000">After Login Click on User Name , showing right side on top.</span></strong></p>
<p>&nbsp;<img id="197460" src="description/aws-step 2.png" alt=""></p>
<p><span style="color:#ff0000"><strong>Click on My Security Credentials</strong></span></p>
<p>&nbsp;<img id="197461" src="description/aws-step 3.png" alt=""></p>
<p><strong><span style="color:#ff0000">Click Continue to Security Credentials&nbsp; on the Dialog box</span></strong></p>
<p>&nbsp;<img id="197462" src="description/aws-step 4.png" alt=""></p>
<p><strong><span style="color:#ff0000">Click Create New Access Key on Your Security Credentials Page</span></strong></p>
<p>&nbsp;<img id="197463" src="description/aws-step 5.png" alt=""></p>
<p><strong><span style="color:#ff0000">Copy Access key and Secret key from Create Access key dialog, you can also download Access key for feature use into your machine.</span></strong></p>
<p>&nbsp;<img id="197464" src="description/aws-step 6.png" alt=""></p>
<p><strong><span style="color:#ff0000">Add Secret key into Web.Config file</span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><span style="color:#ff0000; font-size:medium"><strong>Output</strong></span></p>
<p><span style="font-size:20px; font-weight:bold"><br>
</span></p>
<p><img id="197452" src="description/op1.png" alt="" width="1677" height="734"><img id="197455" src="description/op2.png" alt="" width="1836" height="738"><img id="197456" src="description/op3.png" alt="" width="1608" height="648"><img id="197457" src="description/op4.png" alt="" width="1220" height="656"><img id="197458" src="description/op5.png" alt="" width="1259" height="684"></p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">Click here to add your code snippet.using System;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Web.aspx"  title="Auto generated link to System.Web">System.Web</a>;
using Amazon;
using Amazon.S3;

namespace TestWeb.Utilities.Common
{
    public class AWSService : IAWSServce
    {
        public AWSService() { }
        //public AWSService(string accessKey,string secretkey,RegionEndpoint regionEndpoint )
        //{
        //    this.AccessKey = accessKey;
        //    this.SecretKey = secretkey;
        //    this.RegionEndpoint = regionEndpoint;
        //}
        public virtual IAmazonS3 Client {
            get { return Amazon.AWSClientFactory.CreateAmazonS3Client(Config.AccessKey,Config.SecretKey,RegionEndpoint.APNortheast1); }
        }

        //public string AccessKey { get; set; }
        //public string SecretKey { get; set; }
        //public RegionEndpoint RegionEndpoint {
        //    get { return RegionEndpoint.APNortheast2; }
        //    set { RegionEndpoint = value; }
        //}
    }
}</pre>
<div class="preview">
<pre class="csharp">Click&nbsp;here&nbsp;to&nbsp;add&nbsp;your&nbsp;code&nbsp;snippet.<span class="cs__keyword">using</span>&nbsp;System;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://code.msdn.microsoft.com/AWS-SDK-S3-Storage-using-C-9021ce4f/https://msdn.microsoft.com/en-US/library/System.Web.aspx"  title="Auto generated link to System.Web">System.Web</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Amazon;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Amazon.S3;&nbsp;
&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;TestWeb.Utilities.Common&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;AWSService&nbsp;:&nbsp;IAWSServce&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;AWSService()&nbsp;{&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//public&nbsp;AWSService(string&nbsp;accessKey,string&nbsp;secretkey,RegionEndpoint&nbsp;regionEndpoint&nbsp;)</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;&nbsp;&nbsp;&nbsp;this.AccessKey&nbsp;=&nbsp;accessKey;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;&nbsp;&nbsp;&nbsp;this.SecretKey&nbsp;=&nbsp;secretkey;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;&nbsp;&nbsp;&nbsp;this.RegionEndpoint&nbsp;=&nbsp;regionEndpoint;</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">virtual</span>&nbsp;IAmazonS3&nbsp;Client&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">get</span>&nbsp;{&nbsp;<span class="cs__keyword">return</span>&nbsp;Amazon.AWSClientFactory.CreateAmazonS3Client(Config.AccessKey,Config.SecretKey,RegionEndpoint.APNortheast1);&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//public&nbsp;string&nbsp;AccessKey&nbsp;{&nbsp;get;&nbsp;set;&nbsp;}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//public&nbsp;string&nbsp;SecretKey&nbsp;{&nbsp;get;&nbsp;set;&nbsp;}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//public&nbsp;RegionEndpoint&nbsp;RegionEndpoint&nbsp;{</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;{&nbsp;return&nbsp;RegionEndpoint.APNortheast2;&nbsp;}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//&nbsp;&nbsp;&nbsp;&nbsp;set&nbsp;{&nbsp;RegionEndpoint&nbsp;=&nbsp;value;&nbsp;}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__com">//}</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}</pre>
</div>
</div>
</div>
<h1><span>Source Code Files</span></h1>
<p><span></span></p>
<div class="endscriptcode">&nbsp;AWSService.cs</div>
<p>&nbsp;</p>
<p>&nbsp;IAWSService.cs</p>
<p>BucketController</p>
<p>UploadController</p>
<h1>More Information</h1>
<p><em>For more information on X, see ...?</em></p>

</div>


    </div>
</body>
</html>
